# Oxidize Client Configuration Example
# Copy to ~/.config/oxidize/client.toml
#
# Usage:
#   oxidize-client --server 1.2.3.4:4433 --config client.toml
#
# The server address is passed via CLI (not in this config file)

# Enable LZ4 compression for outgoing packets
enable_compression = true

# Only compress payloads larger than this (bytes)
compression_threshold = 512

# Buffer size for packet handling (bytes)
buffer_size = 65536

# Send keepalive pings to server every N seconds
keepalive_interval = 30

# Retry connection to server every N seconds after disconnect
reconnect_interval = 5

# Enable aggressive DNS prefetching
# Resolves likely next domains before you need them
enable_dns_prefetch = true

# Maximum DNS cache entries
dns_cache_size = 1000

# Maximum queued packets before dropping
# Higher = more memory, lower = packet loss under burst
max_packet_queue = 10000

# TUN interface MTU (Maximum Transmission Unit)
# Standard Ethernet = 1500, Jumbo frames = 9000
tun_mtu = 1500

# Enable header compression (experimental)
# Further reduces overhead for small packets
enable_header_compression = true

# ROHC (Robust Header Compression) - RFC 3095
# Compresses IP/UDP/TCP headers from ~40 bytes to 1-4 bytes
# Best for: Gaming, VoIP, small packet workloads
# Requires librohc to be installed (see docs/ROHC.md)
enable_rohc = true

# Maximum packet size for ROHC compression (bytes)
# Larger packets use LZ4 only (headers are negligible overhead)
rohc_max_size = 1500

# === MASQUE-INSPIRED PERFORMANCE OPTIONS ===
# These options make the relay feel invisible by optimizing
# connection speed and real-time traffic handling

# Enable 0-RTT session resumption for instant reconnects
# Saves ~1 RTT on reconnection by caching session tickets
# WARNING: 0-RTT is vulnerable to replay attacks. Only enable if you understand the risks.
# For VPN tunnels, this is generally safe as inner protocols handle replay protection.
# Set to true for lowest latency, false (default) for maximum security.
enable_0rtt = false

# Path to session ticket cache file
session_cache_path = "/tmp/oxidize-session-cache"

# Enable QUIC datagrams for real-time traffic (gaming/VoIP)
# Datagrams bypass stream ordering = no head-of-line blocking
# Result: Ultra-low latency for gaming/VoIP traffic
enable_datagrams = true

# Latency threshold (ms) - use datagrams for latency-sensitive traffic
datagram_latency_threshold_ms = 50

# Enable connection migration for seamless IP changes
# Maintains connection when switching WiFi -> cellular, etc.
enable_migration = true

# Enable multiplexed streams by traffic type
# Separates bulk vs interactive traffic for better responsiveness
enable_stream_multiplexing = true

# Ports considered real-time/gaming traffic (use datagrams)
# Traffic to these ports bypasses stream ordering for lowest latency
realtime_ports = [
    # Gaming
    3074, 3478, 3479, 3480,  # Xbox Live
    3658, 3659,               # PlayStation
    27015, 27016, 27017,      # Steam/Valve
    7777, 7778, 7779,         # Unreal Engine
    # VoIP
    5060, 5061,               # SIP
    16384, 16482,             # RTP range
    19302, 19305,             # Google STUN
    # Streaming
    1935,                     # RTMP
]
